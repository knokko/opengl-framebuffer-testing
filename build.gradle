plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '1.3.50'
    id 'com.github.johnrengelman.shadow' version '4.0.4'
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'org.jetbrains.kotlin.jvm'
    
    group = 'nl.knokko.test.framebuffers'
    version = '1.0'

    repositories {
        mavenCentral()
    }

    compileKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }
    compileTestKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    sourceCompatibility = 1.8
    project.ext.lwjglVersion = "3.2.3"

    dependencies {
        implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
        testImplementation 'io.kotlintest:kotlintest-runner-junit5:3.3.2'
        testCompile group: 'junit', name: 'junit', version: '4.12'
    }
}

shadowJar {
    manifest {
        attributes ('Main-Class': 'stuff.FramebufferTesterKt')
    }
}

dependencies {
    implementation "org.lwjgl:lwjgl:$lwjglVersion"
    implementation "org.lwjgl:lwjgl-opengl:$lwjglVersion"
    implementation "org.lwjgl:lwjgl-glfw:$lwjglVersion"

    runtimeOnly "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
    runtimeOnly "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-windows"
    runtimeOnly "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows"

    runtimeOnly "org.lwjgl:lwjgl:$lwjglVersion:natives-windows-x86"
    runtimeOnly "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-windows-x86"
    runtimeOnly "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows-x86"

    runtimeOnly "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
    runtimeOnly "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-linux"
    runtimeOnly "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-linux"

    runtimeOnly "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
    runtimeOnly "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-macos"
    runtimeOnly "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-macos"
}
